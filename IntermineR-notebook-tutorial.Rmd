---
title: "Intermine Tutorial"
output: html_notebook
---
This tutorial aims at taking you through some of the basic functions offered by the IntermineR package. 

We begin by loading the IntermineR package. The function listMines() displays the various biological databases that we have access to. 

```{r}
library(InterMineR)
listMines()
```

We would like to query the Human Mine. 
```{r}
im<-initInterMine(mine=listMines()["HumanMine"])
im
```
Intermines have a fixed set of templates for querying the database. We can take a look at this set of templates: 
```{r}
templates<-getTemplates(im)
head(templates)
```

We would like to find templates involving genes. Inorder to get that list we can use the following command. 

```{r}
template[grep("gene", template$name, ignore.case=T),]
```

We now query the database with the 4th template,i.e Gene_Location. We use the following commands to generate a template query. 

```{r}
queryGeneLoc<-getTemplateQuery(im,"Gene_Location")
queryGeneLoc
```

A query consists of three essential members: 
1. Select/View: This represents the output columns in the query output. 
2. Query Constraints (where): Path,op,value and code form the basic constraints while querying a database.   Path is the same format as the Select columns. op (The constraint operator can be one of "=",'!=', 'LOOKUP', 'ONE OF', 'NONE OF', '>', '<', '>=', '<=', 'LIKE'), code refers to the name of the constraint and value refers to the value of the constraint. 
3. Constraint Logic: A constraintLogic, if not explicitly given, is "AND" operation,
e.g., "A and B", where A and B are the codes in the constraints.


Inorder to run a query we use the following functions: 

```{r}
resGeneLoc<-runQuery(im,queryGeneLoc)
resGeneLoc
```

Example # 1

If we now want to modify the query to find the location of the gene "ABO", we can change the constraints. 

```{r}
queryGeneLoc$where[[2]]$value="ABO"
queryGeneLoc

```


Now, we can run the query again as we did earlier. 

```{r}
resGeneLoc<-runQuery(im,queryGeneLoc)
resGeneLoc
```

